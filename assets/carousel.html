<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>★タイトル★</title>
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0">
<meta name="description" content="★概要★">
<meta name="keywords" content="★キーワード★">
<link rel="stylesheet" type="text/css" href="./common/css/common.css">
<link rel="stylesheet" type="text/css" href="./common/css/design.css">
<style>
#page { width: 100%; }
.imageList { overflow: hidden; }
.imageList-list {}
.imageList-list li {
	position: relative;
	float: left;
}
.imageList-list li span {
	position: absolute;
	bottom: 10px;
	left: 10px;
	font-size: 26px;
	color: #fff;
	font-weight: bold;
	text-shadow: 0 0 3px #000;
}
.imageList-list li img {
	width: 100%;
	height: auto;
	opacity: 0.05;
}
</style>
</head>
<body>

<div id="page">

	<div class="imageList" id="CarouselView">
		<ul class="imageList-list js-carouselList">
			<li><img src="./images/dummy.jpg" alt=""><span>1</span></li>
			<li><img src="./images/dummy.jpg" alt=""><span>2</span></li>
			<li><img src="./images/dummy.jpg" alt=""><span>3</span></li>
			<li><img src="./images/dummy.jpg" alt=""><span>4</span></li>
			<li><img src="./images/dummy.jpg" alt=""><span>5</span></li>
			<li><img src="./images/dummy.jpg" alt=""><span>6</span></li>
			<li><img src="./images/dummy.jpg" alt=""><span>7</span></li>
		</ul>
	</div>

</div><!--/#page -->

<script src="./common/js/lib/jquery-2.1.1.min.js"></script>
<script>
(function($) {

	/**
	 * 初期処理
	 */
	var pageInit = function() {

		/* カルーセル（タッチイベント確認用） */
		var carouselView = new CarouselView();
		carouselView.init('#CarouselView');

	};

	/**
	 * カルーセル（タッチイベント確認用）
	 */
	var CarouselView = function() {
		var $el = {};
		var $list = {};
		var $listChild = {};
		var isTouch = false;
		var itemCnt = 0;
		var viewCnt = 1;
		var slideWidth = 0;
		var touchMoveX = {
			start: 0,
			end: 0
		};
		var init = function(el) {
			setEl(el);
			render();
			setEvents();
			return this;
		};
		var setEl = function(el) {
			$el = $(el);
			$list = $el.find('.js-carouselList');
			$listChild = $list.children();
			return this;
		};
		var render = function() {
			itemCnt = $listChild.length;
			slideWidth = $listChild.first().outerWidth();
			$list.css({
				position: 'absolute',
				top: 0,
				left: 0,
				width: slideWidth * itemCnt,
			});
			return this;
		};
		var animateSlide = function() {
			$list.animate({
				left: 0
			});
			return this;
		};
		var setEvents = function() {
			$list.on({
				'touchstart': function() {
					touchMoveX.start = event.changedTouches[0].pageX;
				},
				'touchmove': function(e) {
					if(!isTouch) {
						isTouch = true;
						e.preventDefault();
						touchMoveX.end = event.changedTouches[0].pageX;
					}
				},
				'touchend': function() {
					if(isTouch) {
						onTouchSlide();
						isTouch = false;
					}
				}
			});
			return this;
		};
		var onTouchSlide = function() {
			//var left = $list.position().left;
			if(touchMoveX.start - touchMoveX.end > 0) {
				viewCnt--;
			} else {
				viewCnt++;
			}
			console.log('start：' + touchMoveX.start + ' end：' + touchMoveX.end);
			animateSlide();
			return this;
		};
		return { init: init };
	};

	/* 初期処理 */
	pageInit();
})(jQuery);
</script>
</body>
</html>